---
title: "Exploratory analysing on World Happiness Report"
author:
- familyname: Li
  othernames: Weihao
  address: Monash University
  email: wlii0039@student.monash.edu
  correspondingauthor: true
  qualifications: 28723740
- familyname: Curie
  othernames: Pierre
  address: University of Paris
  qualifications: Nobel Prize, PhD
department: Department of\newline Econometrics &\newline Business Statistics
organization: ETC5513 Assignment 4
bibliography: references.bib
biblio-style: apa
linestretch: 1.5
output:
  MonashEBSTemplates::report:
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE, 
                      message = FALSE)
knitr::opts_chunk$set(fig.width = 8, fig.height = 5, fig.alig = "center")
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, cache=TRUE, messages=FALSE, warning=FALSE)
# Make sure you have the latest versions of rmarkdown and bookdown installed
library(ggplot2)
library(tidyverse)
library(dplyr)
library(fpp3)
library(relaimpo)
library(GGally)
library(kableExtra)
```

# Question 3 : Which variables are useful for modelling happiness scores and how the relationship between happiness scores and other factors?


```{r loaddata}
data2015 <- read.csv(here::here("Data/2015.csv"))
data2016 <- read.csv(here::here("Data/2016.csv"))
data2017 <- read.csv(here::here("Data/2017.csv"))
data2018 <- read.csv(here::here("Data/2018.csv"))
data2019 <- read.csv(here::here("Data/2019.csv"))
```

```{r renamevariable}
data2015<-data2015%>% dplyr::select(-c(1,2,3,5,12))
names(data2015)[1]<-"Score"
names(data2015)[2]<-"GDP"
names(data2015)[4]<-"Health"
names(data2015)[6]<-"Trust of Corruption"
#dplyr::rename('GDP'="Economy..GPD.per.Capita.",'Health'="Health..Life.Expectancy.",'Trust'="Trust..Government.Corruption.")

data2016<-data2016%>% dplyr::select(-c(1,2,3,5,6,13))
names(data2016)[1]<-"Score"
names(data2016)[2]<-"GDP"
names(data2016)[4]<-"Health"
names(data2016)[6]<-"Trust of Corruption"

data2017<-data2017%>% dplyr::select(-c(1,2,4,5,12))
names(data2017)[1]<-"Score"
names(data2017)[2]<-"GDP"
names(data2017)[4]<-"Health"
names(data2017)[7]<-"Trust of Corruption"

data2018<-data2018%>% dplyr::select(-c(1,2))%>%mutate(`Perceptions.of.corruption`=as.numeric(Perceptions.of.corruption))
names(data2018)[2]<-"GDP"
names(data2018)[3]<-"Social Support"
names(data2018)[4]<-"Health"
names(data2018)[5]<-"Freedom"
names(data2018)[7]<-"Perceptions of Corruption"

data2019<-data2019%>% dplyr::select(-c(1,2))
names(data2019)[2]<-"GDP"
names(data2019)[3]<-"Social Support"
names(data2019)[4]<-"Health"
names(data2019)[5]<-"Freedom"
names(data2019)[7]<-"Perceptions of Corruption"
```


  **To explore the factors that could be contributing to the happiness score differences between each years, differenct variables in each year will be displayed.**
  
  Firstly,after wrangling the data and comparing the variables, two different variable sets are established.
  
```{r variable2015-2017}
colnames(data2015)%>%kable(caption = 'variable in 2015 dataset') %>%kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE, position = "left")
colnames(data2016)%>%kable(caption = 'variable in 2016 dataset') %>%kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE, position = "left")

colnames(data2017)%>%kable(caption = 'variable in 2017 dataset') %>%kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE, position = "left")
```

```{r variable2018-2019}
colnames(data2018)%>%kable(caption = 'variable in 2018 dataset') %>%kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE, position = "left")
colnames(data2019)%>%kable(caption = 'variable in 2019 dataset') %>%kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE, position = "left")
```

**Table \@ref(tab:variable2015-2017)** shows the same variables for evaluating the happiness scores between 2015 and 2017. **Table \@ref(tab:variable2018-2019)** shows the same variables for evaluating the happiness scores between 2018 and 2019.  The biggest difference in two variable sets is the variable with family factor between 2015 and 2017 which changed to social support factor from 2018 to 2019.